const YAML = require('yaml');
const safeLog = (error) => {
    const message = YAML.stringify(JSON.parse(JSON.stringify(error)));
    return message.replace(/token=.*$/gm, 'REDACTED');
};
module.exports = (registration, error) => {
    const message = `
API call error: ${error.isAxiosError}
Error: ${error.message}

Webhook logs:
      https://api.tito.io/${registration.event.account_slug}/${registration.event.slug}/webhooks

Event: ${registration.event.slug}
Reference: ${registration.reference}
Created at: ${registration.created_at}

Billing info:
  ${registration.billing_address.company_name}
  ${registration.billing_address.vat_number}
  ${registration.billing_address.address}
  ${registration.billing_address.city}
  ${registration.billing_address.country_name}

Total: ${registration.total}

-------------------------------------------------------------

Complete error log:

${safeLog(error)}
`;
    return message;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWVycm9yLWVtYWlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NyZWF0ZS1lcnJvci1lbWFpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFFN0IsTUFBTSxPQUFPLEdBQUcsQ0FBQyxLQUFLLEVBQUUsRUFBRTtJQUN4QixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEUsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNwRCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsWUFBWSxFQUFFLEtBQUssRUFBRSxFQUFFO0lBQ3ZDLE1BQU0sT0FBTyxHQUFHO2tCQUNBLEtBQUssQ0FBQyxZQUFZO1NBQzNCLEtBQUssQ0FBQyxPQUFPOzs7NEJBR00sWUFBWSxDQUFDLEtBQUssQ0FBQyxZQUFZLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJOztTQUU3RSxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUk7YUFDbkIsWUFBWSxDQUFDLFNBQVM7Y0FDckIsWUFBWSxDQUFDLFVBQVU7OztJQUdqQyxZQUFZLENBQUMsZUFBZSxDQUFDLFlBQVk7SUFDekMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxVQUFVO0lBQ3ZDLFlBQVksQ0FBQyxlQUFlLENBQUMsT0FBTztJQUNwQyxZQUFZLENBQUMsZUFBZSxDQUFDLElBQUk7SUFDakMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxZQUFZOztTQUVwQyxZQUFZLENBQUMsS0FBSzs7Ozs7O0VBTXpCLE9BQU8sQ0FBQyxLQUFLLENBQUM7Q0FDZixDQUFDO0lBRUEsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgWUFNTCA9IHJlcXVpcmUoJ3lhbWwnKTtcblxuY29uc3Qgc2FmZUxvZyA9IChlcnJvcikgPT4ge1xuICBjb25zdCBtZXNzYWdlID0gWUFNTC5zdHJpbmdpZnkoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlcnJvcikpKTtcbiAgcmV0dXJuIG1lc3NhZ2UucmVwbGFjZSgvdG9rZW49LiokL2dtLCAnUkVEQUNURUQnKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKHJlZ2lzdHJhdGlvbiwgZXJyb3IpID0+IHtcbiAgY29uc3QgbWVzc2FnZSA9IGBcbkFQSSBjYWxsIGVycm9yOiAke2Vycm9yLmlzQXhpb3NFcnJvcn1cbkVycm9yOiAke2Vycm9yLm1lc3NhZ2V9XG5cbldlYmhvb2sgbG9nczpcbiAgICAgIGh0dHBzOi8vYXBpLnRpdG8uaW8vJHtyZWdpc3RyYXRpb24uZXZlbnQuYWNjb3VudF9zbHVnfS8ke3JlZ2lzdHJhdGlvbi5ldmVudC5zbHVnfS93ZWJob29rc1xuXG5FdmVudDogJHtyZWdpc3RyYXRpb24uZXZlbnQuc2x1Z31cblJlZmVyZW5jZTogJHtyZWdpc3RyYXRpb24ucmVmZXJlbmNlfVxuQ3JlYXRlZCBhdDogJHtyZWdpc3RyYXRpb24uY3JlYXRlZF9hdH1cblxuQmlsbGluZyBpbmZvOlxuICAke3JlZ2lzdHJhdGlvbi5iaWxsaW5nX2FkZHJlc3MuY29tcGFueV9uYW1lfVxuICAke3JlZ2lzdHJhdGlvbi5iaWxsaW5nX2FkZHJlc3MudmF0X251bWJlcn1cbiAgJHtyZWdpc3RyYXRpb24uYmlsbGluZ19hZGRyZXNzLmFkZHJlc3N9XG4gICR7cmVnaXN0cmF0aW9uLmJpbGxpbmdfYWRkcmVzcy5jaXR5fVxuICAke3JlZ2lzdHJhdGlvbi5iaWxsaW5nX2FkZHJlc3MuY291bnRyeV9uYW1lfVxuXG5Ub3RhbDogJHtyZWdpc3RyYXRpb24udG90YWx9XG5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQ29tcGxldGUgZXJyb3IgbG9nOlxuXG4ke3NhZmVMb2coZXJyb3IpfVxuYDtcblxuICByZXR1cm4gbWVzc2FnZTtcbn07XG4iXX0=